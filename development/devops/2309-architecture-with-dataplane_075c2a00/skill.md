# MCP Gateway & Registry - Architecture with Data Plane

```
                                    USERS & AI AGENTS
                                          |
                                          v
+-----------------------------------------------------------------------------------+
|                      MCP GATEWAY  & REGISTRY INFRASTRUCTURE                       |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|    +------------------------------------------------------------------------+     |
|    |                     NGINX REVERSE PROXY (Gateway)                      |     |
|    |                   Entry Point - SSL/TLS Termination                    |     |
|    +------------------------------------------------------------------------+     |
|              |                        |                          |                |
|              |                        v                          v                |
|              |        +-----------------------------+    +-------------------+    |
|              |        |     Registry                |    |   Auth Server     |    |
|              |        |     (FastAPI)               |    |   (FastAPI)       |    |
|              |        |                             |    |                   |    |
|              |        | - Server Management         |    | - OAuth 2.0/OIDC  |    |
|              |        | - Tool Discovery            |    | - JWT Validation  |    |
|              |        | - Agent Registry            |    | - Scope Enforce   |    |
|              |        | - Health Monitoring         |    | - Token Vending   |    |
|              |        +-----------------------------+    +-------------------+    |
|              |                                                  |                 |
|              |                                                  v                 |
|              |                                       +--------------------+       |
|              |                                       | Identity Provider  |       |
|              |                                       | (IdP)              |       |
|              |                                       +--------------------+       |
|              |                                       | - Keycloak         |       |
|              |                                       | - Microsoft Entra  |       |
|              |                                       | - Amazon Cognito   |       |
|              |                                       | - Other OIDC/SAML  |       |
|              |                                       +--------------------+       |
|              |                                                                    |
|              |   DATA PLANE                                                       |
|              |   ==========                                                       |
|              v                                                                    |
|    +------------------------------------------------------------------------+     |
|    |                           MCP SERVERS                                  |     |
|    +------------------------------------------------------------------------+     |
|    |                                                                        |     |
|    |   +---------------+  +---------------+  +---------------+              |     |
|    |   |  MCP Server   |  |  MCP Server   |  |  MCP Server   |    . . .     |     |
|    |   |  (context7)   |  |  (github)     |  |  (jira)       |              |     |
|    |   +---------------+  +---------------+  +---------------+              |     |
|    |                                                                        |     |
|    |   +---------------+  +---------------+  +---------------+              |     |
|    |   |  MCP Server   |  |  MCP Server   |  |  MCP Server   |    . . .     |     |
|    |   |  (confluence) |  |  (slack)      |  |  (custom)     |              |     |
|    |   +---------------+  +---------------+  +---------------+              |     |
|    |                                                                        |     |
|    +------------------------------------------------------------------------+     |
|                                                                                   |
+-----------------------------------------------------------------------------------+


+-----------------------------------------------------------------------------------+
|                                    DATASTORE                                      |
|                         MongoDB-CE  |  Amazon DocumentDB                          |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|   +-------------+  +-------------+  +-------------+  +------------------+         |
|   |  servers    |  |   agents    |  |   scopes    |  |  security_scans  |         |
|   | collection  |  | collection  |  | collection  |  |   collection     |         |
|   +-------------+  +-------------+  +-------------+  +------------------+         |
|                                                                                   |
|   +-------------------------------------------------------------------------+     |
|   |                        HYBRID SEARCH SUPPORT                            |     |
|   |           Keyword Text Matching  +  Vector k-NN (Embeddings)            |     |
|   +-------------------------------------------------------------------------+     |
|                                                                                   |
+-----------------------------------------------------------------------------------+


+-----------------------------------------------------------------------------------+
|                             DEPLOYMENT INFRASTRUCTURE                             |
+-----------------------------------------------------------------------------------+
|                                                                                   |
|      +-------------------+   +-------------------+   +-------------------+        |
|      |    Amazon EKS     |   |    Amazon ECS     |   |    Amazon EC2     |        |
|      |   (Kubernetes)    |   |    (Fargate)      |   |  (Local Dev)      |        |
|      +-------------------+   +-------------------+   +-------------------+        |
|                                                                                   |
+-----------------------------------------------------------------------------------+
```
